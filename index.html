<!-- version: 2026-02-25-1 -->
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Pre-WOD Excuse Generator</title>

  <style>
    :root {
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;

      /* C+C Muscle Factory theme */
      --bg: #0b0f14;
      --card: #121a24;
      --red: #CB0133;
      --cream: #F4F0E2;
      --teal: #0B868F;
      --text: #F4F0E2;
      --muted: rgba(244,240,226,.80);
      --border: rgba(244,240,226,.12);
    }

    body {
      margin: 0;
      background: var(--bg);
      color: var(--text);
    }

    .wrap {
      max-width: 480px;
      margin: 0 auto;
      padding: 24px 16px 60px;
    }

    .card {
      background: rgba(18,26,36,.92);
      border: 1px solid var(--border);
      border-radius: 18px;
      padding: 16px;
      box-shadow: 0 10px 30px rgba(0,0,0,.35);
    }

    .sub {
      opacity: .85;
      margin-bottom: 18px;
    }

    .row {
      display: grid;
      gap: 14px;
      grid-template-columns: 1fr;
    }

    .excuse {
      font-size: 22px;
      line-height: 1.4;
      background: rgba(255,255,255,.05);
      border: 1px solid rgba(255,255,255,.08);
      border-radius: 16px;
      padding: 18px;
      min-height: 140px;
      display: flex;
      align-items: center;
      word-break: break-word;
    }

    .controls {
      display: grid;
      gap: 10px;
    }

    .controls label {
      font-size: 13px;
      opacity: .85;
    }

    select,
    input[type="range"],
    button {
      width: 100%;
      padding: 16px 16px;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,.12);
      background: #0f1620;
      color: var(--text);
      outline: none;
      font-size: 16px;
      box-sizing: border-box;
    }

    button {
      cursor: pointer;
      font-weight: 900;
      border: 1px solid rgba(244,240,226,.18);
      background: linear-gradient(180deg, rgba(203,1,51,.35), rgba(203,1,51,.15));
      -webkit-tap-highlight-color: transparent;
    }

    button.secondary {
      font-weight: 800;
      background: rgba(244,240,226,.06);
    }

    button.danger {
      font-weight: 1000;
      background: linear-gradient(180deg, rgba(11,134,143,.35), rgba(11,134,143,.12));
      border-color: rgba(11,134,143,.35);
    }

    .mini {
      font-size: 12px;
      opacity: .78;
      line-height: 1.35;
    }

    .pillrow {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 10px;
    }

    .pill {
      padding: 7px 10px;
      border-radius: 999px;
      background: rgba(11,134,143,.12);
      border: 1px solid rgba(11,134,143,.28);
      font-size: 12px;
      opacity: .95;
    }

    .fav {
      margin-top: 18px;
      display: grid;
      gap: 10px;
    }

    .favItem {
      padding: 12px;
      border-radius: 14px;
      background: rgba(255,255,255,.04);
      border: 1px solid rgba(255,255,255,.08);
      display: grid;
      gap: 8px;
    }

    .favItem .actions {
      display: flex;
      gap: 8px;
    }

    .divider {
      height: 1px;
      background: rgba(244,240,226,.10);
      margin: 16px 0;
    }

    /* Meme */
    .memeCard {
      margin-top: 16px;
      padding: 14px;
      border-radius: 18px;
      border: 1px solid rgba(244,240,226,.12);
      background: rgba(15,22,32,.55);
    }

    .memeCanvasWrap {
      border-radius: 16px;
      overflow: hidden;
      border: 1px solid rgba(244,240,226,.12);
      background: rgba(255,255,255,.03);
      margin-top: 10px;
    }

    canvas {
      width: 100%;
      height: auto;
      display: block;
    }

    .toast {
      position: fixed;
      left: 50%;
      bottom: 16px;
      transform: translateX(-50%);
      padding: 10px 12px;
      border-radius: 999px;
      background: rgba(0,0,0,.75);
      border: 1px solid rgba(255,255,255,.12);
      opacity: 0;
      pointer-events: none;
      transition: opacity .18s ease;
      font-size: 13px;
    }

    .toast.show {
      opacity: 1;
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="card">
      <div style="display:flex; align-items:center; gap:12px; margin-bottom:8px;">
        <img
          src="cc-logo.jpg"
          alt="C+C Muscle Factory"
          style="width:54px; height:54px; border-radius:14px; border:1px solid rgba(244,240,226,.18); object-fit:cover;"
        />
        <div>
          <h1 style="margin:0; font-size:22px;">Pre-WOD Excuse Generator</h1>
          <div class="mini" style="opacity:.9;">C+C Muscle Factory ‚Ä¢ Shark Tank Edition</div>
        </div>
      </div>

      <div class="sub">
        For when you‚Äôre ‚Äúnot skipping‚Äù‚Ä¶ you‚Äôre <em>periodizing</em>.
      </div>

      <div class="row">
        <div>
          <div id="excuse" class="excuse">
            Tap ‚ÄúGenerate‚Äù to produce an excuse with maximum plausibility.
          </div>

          <div class="pillrow">
            <span class="pill" id="tagCat">Category: ‚Äî</span>
            <span class="pill" id="tagBel">Believability: ‚Äî</span>
            <span class="pill" id="tagSpice">Coach-proof: ‚Äî</span>
          </div>
        </div>

        <div class="controls">
          <div>
            <label for="category">Excuse style</label>
            <select id="category">
              <option value="any">Any</option>
              <option value="injury">Injury-ish</option>
              <option value="recovery">Recovery science</option>
              <option value="life">Work/Life logistics</option>
              <option value="fashion">Fashion emergency</option>
              <option value="coach">Coach will understand</option>
              <option value="absurd">Unhinged</option>
            </select>
          </div>

          <div>
            <label for="believability">Believability slider</label>
            <input id="believability" type="range" min="1" max="10" value="7" />
            <div class="mini">1 = ‚Äúaliens‚Äù ‚Ä¢ 10 = ‚Äúdoctor‚Äôs note energy‚Äù</div>
          </div>

          <button id="gen">Generate Excuse</button>
          <button id="copy" class="secondary">Copy</button>
          <button id="fav" class="secondary">Save to Favorites</button>
          <button id="clearFav" class="secondary">Clear Favorites</button>

          <div class="mini" style="margin-top:6px; opacity:.8">
            Tip: choose ‚ÄúCoach will understand‚Äù for maximum survival.
          </div>
        </div>
      </div>

      <div class="fav">
        <h2 style="margin: 10px 0 0; font-size: 16px;">Favorites</h2>
        <div id="favList" class="mini" style="opacity:.92">No favorites yet.</div>
      </div>

      <div class="divider"></div>

      <!-- COACH MEME -->
      <div class="memeCard">
        <div style="font-weight: 1000; font-size: 16px;">Coach Meme</div>
        <div class="mini" style="margin-top:6px;">
          One-tap Rocky-style meme using <strong>iron-dave.PNG</strong> from your GitHub repo.
        </div>

        <button id="ironDaveMode" class="danger" style="margin-top:10px;">
          IRON DAVE MODE
        </button>

        <div class="memeCanvasWrap">
          <canvas id="memeCanvas" width="1080" height="1080"></canvas>
        </div>

        <button id="downloadMeme" class="secondary" style="margin-top:10px;">
          Download Meme
        </button>

        <div class="mini" style="margin-top:8px; opacity:.8;">
          If you see a broken image: confirm the file name matches exactly <code>iron-dave.PNG</code>.
        </div>
      </div>
    </div>
  </div>

  <div id="toast" class="toast">Copied.</div>

  <script>
    const data = {
      injury: [
        "My {bodyPart} is doing that thing again ‚Äî I‚Äôm going to stay in {zone} today.",
        "I tweaked my {bodyPart} on a very innocent movement (like {innocent}). I‚Äôm scaling hard.",
        "I‚Äôve got a {injuryWord} {bodyPart}. If I go RX, I‚Äôll be a cautionary tale.",
        "My {bodyPart} is tight in a way that feels‚Ä¶ litigious. I‚Äôll do {safeAlt}."
      ],
      recovery: [
        "My {scienceThing} is cooked. I‚Äôm doing a {deloadType} deload for nervous system hygiene.",
        "Sleep debt is {sleepNum} hours. I‚Äôm prioritizing recovery so I can peak for‚Ä¶ Tuesday.",
        "I‚Äôm in a low-readiness state per my {wearable}. If I push, it‚Äôs basically malpractice.",
        "I‚Äôm skipping intensity to restore {scienceThing} and protect my long-term {goalWord}."
      ],
      life: [
        "I have a {lifeThing} at {timeThing}. I‚Äôll make it up with a shame-WOD later.",
        "I‚Äôm on kid logistics today ‚Äî if I‚Äôm late, it‚Äôs because I‚Äôm a responsible adult (allegedly).",
        "Work dropped a {workThing}. If I ignore it, I‚Äôll be doing burpees in my unemployment.",
        "I can‚Äôt make it ‚Äî I‚Äôm stuck dealing with {lifeThing}. Please log me as ‚Äòmentally present‚Äô."
      ],
      fashion: [
        "I can‚Äôt make class ‚Äî my {fitItem} doesn‚Äôt match my {fitItem}. That‚Äôs basically injury prevention.",
        "I‚Äôm late because I had to find my ‚Äòperformance‚Äô outfit. You can‚Äôt PR in emotional chaos.",
        "My {fitItem} is in the wash. I refuse to deadlift in ‚Äòlaundry shame‚Äô.",
        "Coach, I‚Äôm scaling today because my new shoes are still in their feelings.",
        "I‚Äôm not skipping. I‚Äôm doing a {deloadType} deload until my outfit looks fast."
      ],
      coach: [
        "Coach, I‚Äôm going to scale today so I don‚Äôt turn a fun WOD into a 6-week rehab arc.",
        "I‚Äôm here, I‚Äôm moving, but I‚Äôm not going full send ‚Äî I want consistency over heroics.",
        "I‚Äôm in the ‚Äòtrain, don‚Äôt test‚Äô phase today. I‚Äôll keep it aerobic and be a good citizen.",
        "I‚Äôm protecting my {bodyPart} so I can show up tomorrow instead of becoming gym folklore."
      ],
      absurd: [
        "I can‚Äôt do RX. My {bodyPart} is in retrograde and my {scienceThing} is emotionally unavailable.",
        "I‚Äôm scaling because my {wearable} said I‚Äôm ‚Äòbuilt different‚Äô but in a fragile way.",
        "I did mobility and accidentally achieved enlightenment. Intensity would ruin it.",
        "I can‚Äôt train today ‚Äî I‚Äôm in a feud with the Assault Bike and it‚Äôs getting legal."
      ]
    };

    const words = {
      bodyPart: ["shoulder", "knee", "hip", "lower back", "wrist", "ankle", "elbow", "pec", "neck", "shin"],
      zone: ["Zone 2", "technique town", "easy street", "scaled nation", "moderate purgatory"],
      innocent: ["box step-ups", "air squats", "stretching", "sneezing", "putting my shoes on"],
      injuryWord: ["spicy", "mildly haunted", "questionable", "suspicious", "high-maintenance"],
      safeAlt: ["bike + light DB work", "ring rows + strict", "sled drags", "tempo goblet squats", "row + core"],
      scienceThing: ["CNS", "HRV", "parasympathetic tone", "mitochondria", "connective tissue", "glycogen stores"],
      deloadType: ["strategic", "high-IQ", "scientific", "humble", "responsible-adult"],
      sleepNum: ["6", "7.5", "9", "12", "a criminal amount of"],
      wearable: ["WHOOP", "Oura", "Apple Watch", "Garmin", "fit-check mirror"],
      goalWord: ["gainz", "performance", "longevity", "PR potential", "knees"],
      lifeThing: ["a plumber situation", "a dentist thing", "a family meeting", "DMV nonsense", "a surprise adult responsibility"],
      timeThing: ["noon", "2pm", "right after class", "in 30 minutes", "in exactly one inconvenient hour"],
      workThing: ["fire drill", "client emergency", "calendar ambush", "‚Äòquick‚Äô meeting", "spreadsheet incident"],
      fitItem: ["Lululemon shorts", "vintage band tee", "new lifters", "headband", "WOD socks", "belt", "sleeves", "pump cover", "crop top", "hoodie"]
    };

    const plausibilityBoosters = [
      "I‚Äôll still warm up and move.",
      "I‚Äôll be there, just not doing anything that makes noises.",
      "I‚Äôm choosing ‚Äòtomorrow me‚Äô today.",
      "I‚Äôll keep it controlled and focus on quality reps.",
      "I‚Äôm subbing {safeAlt} so I don‚Äôt become a walking meme."
    ];

    const coachProofAddons = [
      "I‚Äôm happy to judge, count reps, or wipe equipment like a contributing member of society.",
      "I‚Äôll set up/tear down so I still suffer emotionally.",
      "I‚Äôll do extra mobility so it looks like I‚Äôm trying.",
      "I‚Äôll stay after and clean chalk off things that should never be chalky."
    ];

    function pick(arr) {
      return arr[Math.floor(Math.random() * arr.length)];
    }

    function fill(template) {
      return template.replace(/\{(\w+)\}/g, (_, key) =>
        words[key] ? pick(words[key]) : `{${key}}`
      );
    }

    function generate(category, bel) {
      const cats = Object.keys(data);
      const cat = category === "any" ? pick(cats) : category;

      let base = fill(pick(data[cat]));
      let spice = "";
      let coachProof = "";

      if (bel >= 8) {
        spice = " " + fill(pick(plausibilityBoosters));
        coachProof = " " + pick(coachProofAddons);
      } else if (bel >= 5) {
        spice = " " + fill(pick(plausibilityBoosters));
      } else {
        const chaos = [
          "Also, the music in my car sounded ‚Äòtoo fast‚Äô today, so I‚Äôm listening to my body.",
          "If I go hard, my hamstrings will unionize.",
          "I‚Äôm currently sore in places that don‚Äôt have names."
        ];
        spice = " " + pick(chaos);
      }

      const coachScore = bel >= 8 ? "High" : bel >= 5 ? "Medium" : "Low";

      return {
        text: (base + spice + (bel >= 8 ? coachProof : "")).trim(),
        cat,
        bel,
        coachScore
      };
    }

    const elExcuse = document.getElementById("excuse");
    const elCat = document.getElementById("category");
    const elBel = document.getElementById("believability");
    const elTagCat = document.getElementById("tagCat");
    const elTagBel = document.getElementById("tagBel");
    const elTagSpice = document.getElementById("tagSpice");
    const elToast = document.getElementById("toast");

    let current = null;

    function showToast(msg) {
      elToast.textContent = msg;
      elToast.classList.add("show");
      setTimeout(() => elToast.classList.remove("show"), 900);
    }

    function renderCurrent() {
      if (!current) return;
      elExcuse.textContent = current.text;
      elTagCat.textContent = "Category: " + current.cat;
      elTagBel.textContent = "Believability: " + current.bel + "/10";
      elTagSpice.textContent = "Coach-proof: " + current.coachScore;
    }

    const KEY = "prewod_excuses_favs_v1";

    function loadFavs() {
      try {
        return JSON.parse(localStorage.getItem(KEY) || "[]");
      } catch {
        return [];
      }
    }

    function saveFavs(favs) {
      localStorage.setItem(KEY, JSON.stringify(favs));
    }

    function renderFavs() {
      const favs = loadFavs();
      const el = document.getElementById("favList");

      if (!favs.length) {
        el.innerHTML = "No favorites yet.";
        return;
      }

      el.innerHTML = "";
      favs.slice().reverse().forEach((t, idxFromEnd) => {
        const idx = favs.length - 1 - idxFromEnd;
        const div = document.createElement("div");
        div.className = "favItem";
        div.innerHTML = `
          <div style="font-size:13px; opacity:.9">
            ${t.replace(/</g, "&lt;").replace(/>/g, "&gt;")}
          </div>
          <div class="actions">
            <button class="secondary" data-copy="${idx}">Copy</button>
            <button class="secondary" data-del="${idx}">Delete</button>
          </div>
        `;
        el.appendChild(div);
      });

      el.querySelectorAll('button[data-copy]').forEach(btn => {
        btn.addEventListener("click", async () => {
          const i = Number(btn.getAttribute("data-copy"));
          await navigator.clipboard.writeText(loadFavs()[i]);
          showToast("Copied favorite.");
        });
      });

      el.querySelectorAll('button[data-del]').forEach(btn => {
        btn.addEventListener("click", () => {
          const i = Number(btn.getAttribute("data-del"));
          const favs2 = loadFavs();
          favs2.splice(i, 1);
          saveFavs(favs2);
          renderFavs();
          showToast("Deleted.");
        });
      });
    }

    document.getElementById("gen").addEventListener("click", () => {
      current = generate(elCat.value, Number(elBel.value));
      renderCurrent();
    });

    document.getElementById("copy").addEventListener("click", async () => {
      if (!current) current = generate(elCat.value, Number(elBel.value));
      await navigator.clipboard.writeText(current.text);
      showToast("Copied.");
    });

    document.getElementById("fav").addEventListener("click", () => {
      if (!current) current = generate(elCat.value, Number(elBel.value));
      const favs = loadFavs();
      if (!favs.includes(current.text)) favs.push(current.text);
      saveFavs(favs);
      renderFavs();
      showToast("Saved.");
    });

    document.getElementById("clearFav").addEventListener("click", () => {
      localStorage.removeItem(KEY);
      renderFavs();
      showToast("Cleared.");
    });

    current = generate("any", Number(elBel.value));
    renderCurrent();
    renderFavs();

    // IRON DAVE MEME (Rocky vibe)
    const memeCanvas = document.getElementById("memeCanvas");
    const mctx = memeCanvas.getContext("2d");

    function drawIronDaveText() {
      const cw = memeCanvas.width;
      const ch = memeCanvas.height;
      const topText = "GET UP YOU SON OF A BITCH";
      const bottomText = "‚ÄôCAUSE IRON DAVE LOVES YOU.";

      mctx.textAlign = "center";
      mctx.textBaseline = "middle";

      function caption(str, y) {
        let fontSize = 92;
        mctx.font = `900 ${fontSize}px Impact, Haettenschweiler, 'Arial Black', sans-serif`;
        const maxW = cw * 0.92;

        while (mctx.measureText(str).width > maxW && fontSize > 36) {
          fontSize -= 4;
          mctx.font = `900 ${fontSize}px Impact, Haettenschweiler, 'Arial Black', sans-serif`;
        }

        mctx.lineWidth = Math.max(6, Math.floor(fontSize / 8));
        mctx.strokeStyle = "black";
        mctx.fillStyle = "white";
        mctx.strokeText(str.toUpperCase(), cw / 2, y);
        mctx.fillText(str.toUpperCase(), cw / 2, y);
      }

      caption(topText, 120);
      caption(bottomText, ch - 140);
    }

    function makeGrittyBW() {
      const cw = memeCanvas.width;
      const ch = memeCanvas.height;
      const imageData = mctx.getImageData(0, 0, cw, ch);
      const d = imageData.data;

      for (let i = 0; i < d.length; i += 4) {
        const avg = (d[i] + d[i + 1] + d[i + 2]) / 3;
        d[i] = avg;
        d[i + 1] = avg;
        d[i + 2] = avg;
      }

      mctx.putImageData(imageData, 0, 0);
    }

    function addVignette() {
      const cw = memeCanvas.width;
      const ch = memeCanvas.height;
      const grd = mctx.createRadialGradient(cw / 2, ch / 2, ch / 5, cw / 2, ch / 2, ch);
      grd.addColorStop(0, "rgba(0,0,0,0.05)");
      grd.addColorStop(1, "rgba(0,0,0,0.78)");
      mctx.fillStyle = grd;
      mctx.fillRect(0, 0, cw, ch);
    }

    function generateIronDaveMeme() {
      const img = new Image();

      img.onload = () => {
        const cw = memeCanvas.width;
        const ch = memeCanvas.height;
        const iw = img.width;
        const ih = img.height;

        const scale = Math.max(cw / iw, ch / ih);
        const sw = cw / scale;
        const sh = ch / scale;
        const sx = (iw - sw) / 2;
        const sy = (ih - sh) / 2;

        mctx.clearRect(0, 0, cw, ch);
        mctx.drawImage(img, sx, sy, sw, sh, 0, 0, cw, ch);
        makeGrittyBW();
        addVignette();
        drawIronDaveText();
      };

      img.onerror = () => {
        mctx.clearRect(0, 0, memeCanvas.width, memeCanvas.height);
        mctx.fillStyle = "#0f1620";
        mctx.fillRect(0, 0, memeCanvas.width, memeCanvas.height);
        mctx.fillStyle = "rgba(244,240,226,.9)";
        mctx.font = "700 34px system-ui";
        mctx.textAlign = "center";
        mctx.fillText("Couldn‚Äôt load iron-dave.PNG", memeCanvas.width / 2, memeCanvas.height / 2 - 20);
        mctx.font = "500 22px system-ui";
        mctx.fillText("Upload it next to index.html", memeCanvas.width / 2, memeCanvas.height / 2 + 20);
        showToast("Missing iron-dave.PNG");
      };

      img.src = "iron-dave.PNG"; // must match exactly
    }

    document.getElementById("ironDaveMode").addEventListener("click", () => {
      generateIronDaveMeme();
      showToast("IRON DAVE MODE üî•");
    });

    document.getElementById("downloadMeme").addEventListener("click", () => {
      const a = document.createElement("a");
      a.download = "iron-dave-meme.png";
      a.href = memeCanvas.toDataURL("image/png");
      a.click();
      showToast("Downloaded.");
    });
  </script>
</body>
</html>

