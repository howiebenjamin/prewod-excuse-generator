<!-- version: 2026-02-27 -->
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Barbell Buddy</title>
  <style>
    :root{
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      --bg:#0b0f14; --card:#121a24;
      --text:#f4f0e2; --muted: rgba(244,240,226,.75);
      --border: rgba(244,240,226,.14);
      --accent:#0b868f; --danger:#cb0133;
      --chip:#0e1520;
    }
    body{margin:0; background:var(--bg); color:var(--text);}
    .wrap{max-width:1100px; margin:0 auto; padding:18px 16px 48px;}
    header{
      display:flex; align-items:center; justify-content:space-between; gap:12px;
      margin-bottom:14px;
    }
    .brand{display:flex; align-items:center; gap:12px;}
    .logo{
      width:44px; height:44px; border-radius:12px; object-fit:cover;
      border:1px solid var(--border); background:#0e1520;
    }
    h1{margin:0; font-size:26px; line-height:1.1;}
    .sub{margin:2px 0 0; color:var(--muted); font-size:13px;}
    .grid{display:grid; gap:14px; grid-template-columns: 1fr;}
    @media(min-width:980px){ .grid{grid-template-columns: 1.15fr .85fr;} }

    .card{
      background:var(--card);
      border:1px solid var(--border);
      border-radius:16px;
      padding:16px;
      box-shadow: 0 10px 26px rgba(0,0,0,.28);
    }

    .row{display:flex; gap:10px; flex-wrap:wrap; align-items:end;}
    label{display:block; font-size:13px; color:var(--muted); margin-bottom:6px;}
    input, select, button{
      border-radius:12px;
      border:1px solid var(--border);
      background:var(--chip);
      color:var(--text);
      padding:10px 12px;
      font-size:15px;
      outline:none;
    }
    input[type="number"]{width: 170px;}
    select{min-width:180px;}
    button{
      background: linear-gradient(180deg, rgba(11,134,143,.25), rgba(11,134,143,.08));
      border-color: rgba(11,134,143,.45);
      cursor:pointer;
      font-weight:700;
    }
    button:hover{filter:brightness(1.06);}
    button.ghost{
      background: transparent;
      border-color: rgba(244,240,226,.18);
      font-weight:600;
    }
    .divider{height:1px; background:var(--border); margin:14px 0;}
    .mini{font-size:13px;}
    .muted{color:var(--muted);}
    .kbd{font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
      font-size:12px; padding:2px 6px; border-radius:6px; border:1px solid var(--border); color:var(--muted);}
    .pill{
      display:inline-flex; gap:8px; align-items:center;
      padding:8px 10px; border-radius:999px;
      border:1px solid var(--border);
      background:var(--chip);
      margin:6px 8px 0 0;
      user-select:none;
    }
    .pill input{width:auto;}
    .warn{
      border-left:4px solid var(--danger);
      background: rgba(203,1,51,.08);
      padding:10px 12px;
      border-radius:12px;
      margin-top:10px;
    }
    .ok{
      border-left:4px solid var(--accent);
      background: rgba(11,134,143,.08);
      padding:10px 12px;
      border-radius:12px;
      margin-top:10px;
    }
    .resultTitle{display:flex; justify-content:space-between; align-items:center; gap:12px;}
    .big{font-size:22px; font-weight:900; letter-spacing:.2px;}
    ul{margin:10px 0 0; padding-left:18px;}

    /* Plate stack viz */
    .viz{
      display:flex; align-items:center; gap:10px; flex-wrap:wrap;
      margin-top:10px;
    }
    .bar{
      height:10px; width:180px; border-radius:999px;
      background: rgba(244,240,226,.18);
      border:1px solid rgba(244,240,226,.22);
      position:relative;
    }
    .plates{
      display:flex; gap:6px; align-items:flex-end; flex-wrap:wrap;
    }
    .plate{
      width:22px;
      border-radius:8px;
      border:1px solid rgba(244,240,226,.20);
      background: rgba(11,134,143,.14);
    }
    .plate span{
      display:block; text-align:center; font-size:11px; color:var(--muted);
      padding-top:3px;
    }

    /* Meme */
    .memeWrap{
      display:flex; gap:12px; align-items:center; flex-wrap:wrap;
      justify-content:flex-end;
    }
    .meme{
      width:64px; height:64px; border-radius:14px; object-fit:cover;
      border:1px solid var(--border);
      background:#0e1520;
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <img class="logo" src="cc-logo.jpg" alt="Team logo" onerror="this.style.display='none'">
        <div>
          <h1>Barbell Buddy</h1>
          <div class="sub">Plate math that feels like a gym app, not a calculator.</div>
        </div>
      </div>

      <div class="memeWrap">
        <img class="meme" src="iron-dave.png" alt="Iron Dave" title="Iron Dave" onerror="this.style.display='none'">
        <button id="ironDaveBtn" class="ghost" title="Play Iron Dave sound">IRON DAVE</button>
      </div>
    </header>

    <div class="grid">
      <!-- Controls -->
      <div class="card">
        <div class="row">
          <div>
            <label for="unit">Units</label>
            <select id="unit">
              <option value="lb" selected>Pounds (lb)</option>
              <option value="kg">Kilograms (kg)</option>
            </select>
          </div>

          <div>
            <label for="bar">Bar weight</label>
            <select id="bar">
              <option value="45" selected>45 lb (standard)</option>
              <option value="35">35 lb</option>
              <option value="25">25 lb</option>
              <option value="20">20 kg</option>
              <option value="15">15 kg</option>
              <option value="custom">Custom…</option>
            </select>
          </div>

          <div>
            <label for="barCustom">Custom bar</label>
            <input id="barCustom" type="number" step="0.5" value="45" disabled />
          </div>

          <div>
            <label for="collars">Collars (each side)</label>
            <select id="collars">
              <option value="0" selected>None</option>
              <option value="2.5">2.5</option>
              <option value="5">5</option>
            </select>
          </div>
        </div>

        <div class="divider"></div>

        <div class="row">
          <div>
            <label for="target">Target total</label>
            <input id="target" type="number" step="0.5" value="225" />
          </div>

          <div>
            <label for="mode">Mode</label>
            <select id="mode">
              <option value="exact" selected>Exact only</option>
              <option value="under">Closest under</option>
              <option value="over">Closest over</option>
              <option value="either">Closest either</option>
            </select>
          </div>

          <div>
            <label>&nbsp;</label>
            <button id="calcBtn">Calculate</button>
          </div>

          <div class="mini muted" id="hint"></div>
        </div>

        <div class="divider"></div>

        <div class="row" style="align-items:center;">
          <div class="mini muted" style="flex:1;">
            Plates + inventory (number of <b>pairs</b> you have). Toggle plate sizes on/off, then set counts.
          </div>
          <button id="resetInvBtn" class="ghost" title="Reset inventory to 1 pair each">Reset inventory</button>
        </div>

        <div id="platesWrap"></div>

        <div class="divider"></div>

        <div class="row">
          <div>
            <label for="oneRm">1RM (optional)</label>
            <input id="oneRm" type="number" step="0.5" placeholder="e.g. 315" />
          </div>
          <div>
            <label for="warmupPreset">Warmup preset</label>
            <select id="warmupPreset">
              <option value="classic" selected>Classic (bar, 40/55/70/80/90%)</option>
              <option value="531">5/3/1-ish (bar, 50/60/70/80/90%)</option>
              <option value="minimal">Minimal (bar, 50/70/85%)</option>
            </select>
          </div>
          <div>
            <label>&nbsp;</label>
            <button id="warmupBtn" class="ghost">Generate warmup</button>
          </div>
        </div>

        <div class="mini muted" style="margin-top:10px;">
          Sounds: every time you calculate, it plays a random click sound from <span class="kbd">/sounds</span>.
        </div>
      </div>

      <!-- Results -->
      <div class="card">
        <div class="resultTitle">
          <div class="big">Load Plan</div>
          <div class="muted" id="summary"></div>
        </div>

        <div id="status"></div>

        <div class="divider"></div>

        <div class="muted">Per side:</div>
        <ul id="perSide"></ul>

        <div class="divider"></div>

        <div class="muted">Total plates on bar:</div>
        <ul id="totalPlates"></ul>

        <div class="divider"></div>

        <div class="muted">Visual (per side):</div>
        <div class="viz">
          <div class="bar" aria-hidden="true"></div>
          <div class="plates" id="vizPlates"></div>
        </div>

        <div class="divider"></div>

        <div class="muted">Quick presets:</div>
        <div class="row" id="presetsRow" style="margin-top:8px;"></div>

        <div class="divider"></div>

        <div class="muted">Warmup sets:</div>
        <ul id="warmups"></ul>
      </div>
    </div>
  </div>

  <script>
    // -------------------------
    // Sounds (keep filenames in /sounds exactly)
    // -------------------------
    const CLICK_SOUNDS = [
      "crickets","chicken","punch","boing","orchestra","boom","whistle","boxing-bell",
      "cartoon-whistle","wrong-answer","sad-trombone","boo","airhorn","laugh","rimshot"
    ].map(n => `sounds/${n}.mp3`);

    const IRON_DAVE_SOUND = "sounds/iron-dave.mp3"; // optional

    function playSound(src, volume=0.6){
      try{
        const a = new Audio(src);
        a.volume = volume;
        a.play().catch(()=>{});
      }catch(e){}
    }
    function playRandomClick(){
      const src = CLICK_SOUNDS[Math.floor(Math.random()*CLICK_SOUNDS.length)];
      playSound(src, 0.55);
    }

    // -------------------------
    // Defaults
    // -------------------------
    const PLATES_LB = [45, 35, 25, 10, 5, 2.5];
    const PLATES_KG = [25, 20, 15, 10, 5, 2.5, 1.25];

    const unitEl = document.getElementById('unit');
    const barEl = document.getElementById('bar');
    const barCustomEl = document.getElementById('barCustom');
    const collarsEl = document.getElementById('collars');
    const targetEl = document.getElementById('target');
    const modeEl = document.getElementById('mode');

    const platesWrap = document.getElementById('platesWrap');
    const perSideEl = document.getElementById('perSide');
    const totalPlatesEl = document.getElementById('totalPlates');
    const statusEl = document.getElementById('status');
    const summaryEl = document.getElementById('summary');
    const hintEl = document.getElementById('hint');

    const vizPlatesEl = document.getElementById('vizPlates');

    const presetsRow = document.getElementById('presetsRow');

    const oneRmEl = document.getElementById('oneRm');
    const warmupPresetEl = document.getElementById('warmupPreset');
    const warmupBtn = document.getElementById('warmupBtn');
    const warmupsEl = document.getElementById('warmups');

    const calcBtn = document.getElementById('calcBtn');
    const resetInvBtn = document.getElementById('resetInvBtn');
    const ironDaveBtn = document.getElementById('ironDaveBtn');

    function fmt(n){
      const s = Number(n).toFixed(2);
      return s.replace(/\.00$/,'').replace(/(\.\d)0$/,'$1');
    }

    function getPlatesForUnit(unit){
      return unit === 'kg' ? PLATES_KG.slice() : PLATES_LB.slice();
    }

    function barWeight(){
      if (barEl.value === 'custom') return Number(barCustomEl.value || 0);
      return Number(barEl.value);
    }

    function collarsTotal(){
      const each = Number(collarsEl.value);
      return each * 2;
    }

    // -------------------------
    // Inventory UI + state
    // We store "pairs available" per plate weight
    // -------------------------
    function plateKey(w){ return `p_${String(w).replace('.','_')}`; }

    function renderPlateInventory(){
      platesWrap.innerHTML = '';
      const unit = unitEl.value;
      const plates = getPlatesForUnit(unit).sort((a,b)=>b-a);

      plates.forEach(w => {
        const id = plateKey(w);
        const row = document.createElement('div');
        row.className = 'pill';
        row.style.padding = '10px 12px';
        row.style.borderRadius = '14px';

        row.innerHTML = `
          <input type="checkbox" id="${id}_on" data-weight="${w}" checked />
          <span style="min-width:86px; display:inline-block;">${fmt(w)} ${unit}</span>
          <span class="muted mini">pairs</span>
          <input type="number" id="${id}_pairs" data-weight="${w}" min="0" step="1" value="1" style="width:90px; padding:8px 10px;">
        `;
        platesWrap.appendChild(row);
      });
    }

    function selectedInventory(){
      // returns list of {w, pairs} sorted desc
      const items = [];
      const checks = platesWrap.querySelectorAll('input[type="checkbox"]');
      checks.forEach(ch => {
        if (!ch.checked) return;
        const w = Number(ch.dataset.weight);
        const pairsInput = document.getElementById(`${plateKey(w)}_pairs`);
        const pairs = Math.max(0, Math.floor(Number(pairsInput?.value ?? 0)));
        if (pairs > 0) items.push({ w, pairs });
      });
      items.sort((a,b)=>b.w-a.w);
      return items;
    }

    function resetInventoryTo1(){
      const pairsInputs = platesWrap.querySelectorAll('input[type="number"]');
      pairsInputs.forEach(i => i.value = 1);
      const checks = platesWrap.querySelectorAll('input[type="checkbox"]');
      checks.forEach(ch => ch.checked = true);
    }

    // -------------------------
    // Plate loading solver
    // - inventory aware
    // - supports exact/closest under/over/either
    // Approach:
    // 1) compute per-side target
    // 2) try to find best per-side sum using bounded knapsack-ish (small plate list)
    // Since typical plate counts are small, we brute-force with DFS over plate sizes.
    // -------------------------
    function solvePerSide(perSideTarget, inventory, mode){
      // inventory = [{w, pairs}] where pairs is max count per side (since pairs => 1 plate each side)
      // We'll search for best sum (<= or >=) depending on mode, with preference:
      // - either: minimize abs diff, tie-break toward fewer plates, then heavier plates
      // - under: maximize sum <= target, tie-break fewer plates
      // - over: minimize sum >= target, tie-break fewer plates
      // - exact: only exact
      const weights = inventory.map(x => x.w);
      const maxCounts = inventory.map(x => x.pairs);

      const round2 = (x)=>Math.round(x*100)/100;

      let best = null; // {sum, counts[], plateCount}
      function consider(sum, counts){
        sum = round2(sum);
        const plateCount = counts.reduce((a,c)=>a+c,0);
        const diff = round2(sum - perSideTarget);
        const absDiff = Math.abs(diff);

        if (mode === 'exact' && absDiff > 1e-9) return;
        if (mode === 'under' && sum - perSideTarget > 1e-9) return;
        if (mode === 'over'  && perSideTarget - sum > 1e-9) return;

        if (!best){
          best = {sum, counts: counts.slice(), plateCount};
          return;
        }

        const bestDiff = round2(best.sum - perSideTarget);
        const bestAbs = Math.abs(bestDiff);

        const better =
          mode === 'either'
            ? (absDiff < bestAbs - 1e-9) ||
              (Math.abs(absDiff - bestAbs) <= 1e-9 && plateCount < best.plateCount) ||
              (Math.abs(absDiff - bestAbs) <= 1e-9 && plateCount === best.plateCount && sum > best.sum)
            : mode === 'under'
              ? (sum > best.sum + 1e-9) ||
                (Math.abs(sum - best.sum) <= 1e-9 && plateCount < best.plateCount)
              : mode === 'over'
                ? (sum < best.sum - 1e-9) ||
                  (Math.abs(sum - best.sum) <= 1e-9 && plateCount < best.plateCount)
                : false;

        if (better){
          best = {sum, counts: counts.slice(), plateCount};
        }
      }

      // DFS with pruning
      const n = weights.length;
      function dfs(i, currentSum, counts){
        if (i === n){
          consider(currentSum, counts);
          return;
        }

        const w = weights[i];
        const maxC = maxCounts[i];

        // Try larger counts first to reach target quickly
        for (let c = maxC; c >= 0; c--){
          const nextSum = round2(currentSum + c*w);

          // Basic pruning:
          // If mode is under/exact, and we've exceeded target, skip
          if ((mode === 'under' || mode === 'exact') && nextSum - perSideTarget > 1e-9) continue;

          counts[i] = c;
          dfs(i+1, nextSum, counts);
        }
        counts[i] = 0;
      }

      dfs(0, 0, new Array(n).fill(0));
      return best ? { sum: best.sum, counts: best.counts, weights } : null;
    }

    // -------------------------
    // UI helpers
    // -------------------------
    function clearResults(){
      perSideEl.innerHTML = '';
      totalPlatesEl.innerHTML = '';
      vizPlatesEl.innerHTML = '';
      statusEl.innerHTML = '';
      summaryEl.textContent = '';
    }

    function showStatusOK(text){ statusEl.innerHTML = `<div class="ok">${text}</div>`; }
    function showStatusWarn(text){ statusEl.innerHTML = `<div class="warn">${text}</div>`; }

    function li(text){
      const el = document.createElement('li');
      el.textContent = text;
      return el;
    }

    function renderViz(weights, counts, unit){
      vizPlatesEl.innerHTML = '';
      // show heaviest -> lightest, repeated by count
      for (let i=0;i<weights.length;i++){
        const w = weights[i];
        const c = counts[i];
        for (let k=0;k<c;k++){
          const d = document.createElement('div');
          d.className = 'plate';
          // height scaled by weight (simple)
          const h = 18 + Math.min(48, w*1.2);
          d.style.height = `${h}px`;
          d.innerHTML = `<span>${fmt(w)}</span>`;
          vizPlatesEl.appendChild(d);
        }
      }
      if (vizPlatesEl.children.length === 0){
        const d = document.createElement('div');
        d.className = 'muted mini';
        d.textContent = `No plates needed per side.`;
        vizPlatesEl.appendChild(d);
      }
    }

    function buildPlateBreakdown(weights, counts){
      // {weight: countPerSide}
      const out = {};
      for (let i=0;i<weights.length;i++){
        if (counts[i] > 0) out[weights[i]] = counts[i];
      }
      return out;
    }

    // -------------------------
    // Presets
    // -------------------------
    function setTarget(x){
      targetEl.value = fmt(x);
      calculate();
    }

    function renderPresets(){
      presetsRow.innerHTML = '';
      const unit = unitEl.value;
      const preset = unit === 'kg'
        ? [60, 80, 100, 120, 140, 160, 180, 200]
        : [95, 135, 155, 185, 205, 225, 275, 315];

      preset.forEach(v => {
        const b = document.createElement('button');
        b.className = 'ghost';
        b.textContent = `${v} ${unit}`;
        b.addEventListener('click', () => setTarget(v));
        presetsRow.appendChild(b);
      });
    }

    // -------------------------
    // Warmups
    // -------------------------
    function warmupPercents(preset){
      if (preset === 'minimal') return [0, 50, 70, 85];
      if (preset === '531') return [0, 50, 60, 70, 80, 90];
      return [0, 40, 55, 70, 80, 90];
    }

    function generateWarmups(){
      warmupsEl.innerHTML = '';
      const oneRm = Number(oneRmEl.value);
      const unit = unitEl.value;

      if (!Number.isFinite(oneRm) || oneRm <= 0){
        warmupsEl.appendChild(li('Enter a 1RM to generate warmups.'));
        return;
      }

      const pcts = warmupPercents(warmupPresetEl.value);
      const bar = barWeight();
      const collars = collarsTotal();
      const inventory = selectedInventory();

      if (inventory.length === 0){
        warmupsEl.appendChild(li('Select plates + inventory first.'));
        return;
      }

      pcts.forEach(p => {
        const target = (p === 0) ? bar + collars : Math.round((oneRm * (p/100)) * 2) / 2; // round to 0.5
        // Ensure at least bar+collars
        const safeTarget = Math.max(bar + collars, target);

        const perSideTarget = (safeTarget - bar - collars) / 2;
        const mode = 'either';
        const sol = solvePerSide(perSideTarget, inventory, mode);

        if (!sol){
          warmupsEl.appendChild(li(`${p === 0 ? 'Bar' : p + '%'}: ${fmt(safeTarget)} ${unit} (no solution with current inventory)`));
          return;
        }

        const achieved = bar + collars + sol.sum * 2;
        warmupsEl.appendChild(li(`${p === 0 ? 'Bar' : p + '%'}: ${fmt(achieved)} ${unit}`));
      });
    }

    // -------------------------
    // Main calculate
    // -------------------------
    function calculate(){
      clearResults();

      const unit = unitEl.value;
      const target = Number(targetEl.value);
      const mode = modeEl.value;

      if (!Number.isFinite(target) || target <= 0){
        showStatusWarn('Enter a valid target weight.');
        return;
      }

      const bar = barWeight();
      const collars = collarsTotal();
      const inventory = selectedInventory();

      if (inventory.length === 0){
        showStatusWarn('Select at least one plate size and set inventory pairs > 0.');
        return;
      }

      const loadable = target - bar - collars;

      if (loadable < 0){
        showStatusWarn(`Target is less than bar + collars (${fmt(bar + collars)} ${unit}).`);
        summaryEl.textContent = `${fmt(bar + collars)} ${unit} minimum`;
        return;
      }

      const perSideTarget = loadable / 2;

      // If loadable can't split evenly, still solve "either" but warn
      const uneven = Math.abs(perSideTarget * 2 - loadable) > 1e-9;

      // Solve per-side with inventory + selected mode
      const sol = solvePerSide(perSideTarget, inventory, uneven ? 'either' : mode);

      if (!sol){
        showStatusWarn('No solution found with current plates/inventory.');
        return;
      }

      const achievedTotal = bar + collars + sol.sum * 2;
      summaryEl.textContent = `${fmt(achievedTotal)} ${unit} total`;

      const perSide = buildPlateBreakdown(sol.weights, sol.counts);
      const weightsDesc = Object.keys(perSide).map(Number).sort((a,b)=>b-a);

      if (weightsDesc.length === 0){
        perSideEl.appendChild(li('No plates needed per side.'));
        totalPlatesEl.appendChild(li('None.'));
      } else {
        weightsDesc.forEach(w => perSideEl.appendChild(li(`${perSide[w]} × ${fmt(w)} ${unit}`)));
        weightsDesc.forEach(w => totalPlatesEl.appendChild(li(`${perSide[w]*2} × ${fmt(w)} ${unit}`)));
      }

      renderViz(sol.weights, sol.counts, unit);

      const diff = Math.round((achievedTotal - target) * 100) / 100;

      if (uneven){
        showStatusWarn(`Your target minus bar/collars (${fmt(loadable)} ${unit}) can’t split perfectly across two sides. Showing closest plan: ${fmt(achievedTotal)} ${unit}.`);
      } else if (Math.abs(diff) < 1e-9){
        showStatusOK(`Exact match: ${fmt(target)} ${unit}. Load ${fmt(perSideTarget)} ${unit} per side.`);
      } else if (diff < 0){
        showStatusWarn(`Closest under: ${fmt(achievedTotal)} ${unit} (short by ${fmt(Math.abs(diff))} ${unit}).`);
      } else {
        showStatusWarn(`Closest over: ${fmt(achievedTotal)} ${unit} (over by ${fmt(diff)} ${unit}).`);
      }

      // play a random sound on calculate
      playRandomClick();
    }

    // -------------------------
    // Unit syncing defaults + hints
    // -------------------------
    function syncUnitDefaults(){
      const unit = unitEl.value;
      hintEl.textContent = unit === 'kg'
        ? 'Common: 20kg bar, 2.5kg collars, 25/20/15/10/5/2.5/1.25 plates'
        : 'Common: 45lb bar, no collars, 45/35/25/10/5/2.5 plates';

      if (unit === 'kg'){
        if (barEl.value !== 'custom') barEl.value = '20';
        collarsEl.value = '2.5';
        targetEl.step = '0.5';
      } else {
        if (barEl.value !== 'custom') barEl.value = '45';
        collarsEl.value = '0';
        targetEl.step = '0.5';
      }
    }

    // -------------------------
    // Events
    // -------------------------
    barEl.addEventListener('change', () => {
      const isCustom = barEl.value === 'custom';
      barCustomEl.disabled = !isCustom;
      if (!isCustom) barCustomEl.value = barEl.value;
      calculate();
    });

    barCustomEl.addEventListener('input', () => calculate());

    unitEl.addEventListener('change', () => {
      syncUnitDefaults();
      renderPlateInventory();
      renderPresets();
      calculate();
    });

    collarsEl.addEventListener('change', () => calculate());
    modeEl.addEventListener('change', () => calculate());

    calcBtn.addEventListener('click', calculate);
    targetEl.addEventListener('keydown', (e) => { if (e.key === 'Enter') calculate(); });

    platesWrap.addEventListener('input', (e) => {
      // any change to checkbox/count updates solution
      if (e.target && (e.target.tagName === 'INPUT' || e.target.tagName === 'SELECT')) calculate();
    });

    resetInvBtn.addEventListener('click', () => {
      resetInventoryTo1();
      calculate();
    });

    warmupBtn.addEventListener('click', () => generateWarmups());

    ironDaveBtn.addEventListener('click', () => {
      // Plays your iron-dave.mp3 if present; otherwise does nothing (won't crash)
      playSound(IRON_DAVE_SOUND, 0.7);
    });

    // Init
    (function init(){
      syncUnitDefaults();
      renderPlateInventory();
      renderPresets();
      barCustomEl.value = barEl.value;
      calculate();
      warmupsEl.appendChild(li('Enter a 1RM and click “Generate warmup”.'));
    })();
  </script>
</body>
</html>

